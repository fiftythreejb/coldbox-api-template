<!DOCTYPE html>
<html>

<head>
	

</head>

<body class="mceContentBody aui-theme-default wiki-content fullsize">
	<p>&nbsp;</p>
	<p>Our ColdBox application uses the built-in LogBox module for logging. This allows us to centralize management of
		our logs and allow more flexibility, simplicity, and power when logging or tracing is needed.</p>
	<p>By default, you will have access to the root logger and can make a log which will appear in the default
		configuration. In your handlers, you can make a log by using the builtin logbox variable, getting the root
		logger and using one of the severity levels to make your log.
		<code>logbox.getRootLogger().warn('Your log message', ['your log data', 'goes hear'])</code>.</p>
	<h2>Resources</h2>
	<p><a href="https://logbox.ortusbooks.com/" data-card-appearance="inline">https://logbox.ortusbooks.com/</a> </p>
	<p><a href="https://coldbox.ortusbooks.com/getting-started/configuration/coldbox.cfc/configuration-directives/logbox"
			data-card-appearance="inline">https://coldbox.ortusbooks.com/getting-started/configuration/coldbox.cfc/configuration-directives/logbox</a>
	</p>
	<p><a href="https://shiftinsert.nl/logbox-basic-concepts-and-configuration/"
			data-card-appearance="inline">https://shiftinsert.nl/logbox-basic-concepts-and-configuration/</a> </p>
	<h2>Configuration</h2>
	<p>Configuration of LogBox is set in the <code>\config\Coldbox.cfc</code> file.</p>
	<p>Our configuration looks something like the below.</p>
	<table>
		<tr>
			<td class="wysiwyg-macro-body">
				<pre>logBox = {
    // Define Appenders
    appenders : {
    	coldboxTracer : { class : "coldbox.system.logging.appenders.ConsoleAppender" },
    	debugLog :  {
    		class : "RollingFileAppender",
    		properties : {
    		  filePath : "logs",
    		  fileName : "debug",
    		  autoExpand : true,
    		  fileMaxSize : 2000,
    		  fileMaxArchives : 3
    		},
    		levelMin : '4',
    		levelMax : '4'
    	},
    	errorLog : {
    		class : "RollingFileAppender",
    		properties : {
    			filePath : "logs",
    			fileName : "error",
    			autoExpand : true,
    			fileMaxSize : 2000,
    			fileMaxArchives : 3
    		},
    		levelMax : '2'
    	},
    	handlerAppender : {
    		class : "RollingFileAppender",
    		properties : {
    			filePath : "logs",
    			fileName : "handlerLog",
    			autoExpand : true,
    			fileMaxSize : 2000,
    			fileMaxArchives : 3
    		},
    		levelMax : '2'
    	}
    },
    // Root Logger
    root      : { levelmax : "DEBUG", appenders : "debugLog,errorLog" },
    // Implicit Level Categories
    categories = {
    	"handlerLog" : {
    	  appenders: "handlerAppender",
    	  levelMax: "debug"
    	}
    }

};</pre>
			</td>
		</tr>
	</table>
	<h3>Appenders</h3>
	<p><a href="https://logbox.ortusbooks.com/configuration/configuring-logbox/logbox-dsl#appenders"
			data-card-appearance="inline">https://logbox.ortusbooks.com/configuration/configuring-logbox/logbox-dsl#appenders</a>
	</p>
	<p>The appenders are places that the logs will go. We are currently using file appenders, logs will be appended to a
		file and archived after the specified length.</p>
	<table>
		<tr>
			<td class="wysiwyg-macro-body">
				<pre>debugLog : {
class : "RollingFileAppender",
properties : {
filePath : "logs",
fileName : "debug",
autoExpand : true,
fileMaxSize : 2000,
fileMaxArchives : 3
},
levelMin : '4',
levelMax : '4'
}</pre>
			</td>
		</tr>
	</table>
	<p>This appender is called “debugLog”. This file will be located in the root logs folder and be prefixed with
		“debug” in the file name. The logs will ‘expand’ which means that the log data will not be truncated. After 2000
		lines, it will be zipped and archived. There will me a max of 3 archives.</p>
	<p>Level refers to the debug level.</p>
	<ul>
		<li>
			<p>NONE = -1: no logging at all</p>
		</li>
		<li>
			<p>FATAL = 0 : the application’s situation is catastrophic, it should stop</p>
		</li>
		<li>
			<p>ERROR = 1: a severe issue is stopping functions, but application still runs.</p>
		</li>
		<li>
			<p>WARN = 2: Unexpected problem: not sure if it will happen again, but no serious harm to your application
				yet. Eventually you need to look at it.</p>
		</li>
		<li>
			<p>INFO = 3: Normal behaviour, these messages just tell you what happened during normal operation.</p>
		</li>
		<li>
			<p>DEBUG =4: Information necessary to diagnose, troubleshoot or test the application.</p>
		</li>
	</ul>
	<h3>Categories</h3>
	<p>Categories are custom loggers you can use in your code to log in a specific way. </p>
	<table>
		<tr>
			<td class="wysiwyg-macro-body">
				<pre>categories = {
"handlerLog" : {
appenders: "handlerAppender",
levelMax: "debug"
}
}</pre>
			</td>
		</tr>
	</table>
	<p>We have a “handlersLog” that uses the “handlerAppender” with a max logging level of “debug”.</p>
	<p>You can inject this logger in your handler and use it lo log to a specific file.</p>
	<table>
		<tr>
			<td class="wysiwyg-macro-body">
				<pre>component extends="coldbox.system.EventHandler" {
property name="handlerLog" inject="logbox:logger:handlerLog";</pre>
			</td>
		</tr>
	</table>
	<p>Then in your functions, you can call the appropriate logger (debug, warn, error…)
		<code>handlerLog.error('test handler log', {data: prc.welcomeMessage});</code></p>
	<p>&nbsp;</p>
</body>

</html>